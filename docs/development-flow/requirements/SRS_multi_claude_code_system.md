# Software Requirements Specification (SRS)
## Multi-Agent Claude Code Development System (MACCDS)
### Version 1.0.0

## 1. 概要

### 1.1 目的
本文書は、複数のClaude Codeインスタンスを協調させて並列的にソフトウェア開発を行うシステム（MACCDS）の機能要件および非機能要件を定義する。

### 1.2 適用範囲
- システムの対象：AI Multi-Agent Claude Code Development System
- 適用プロジェクト：あらゆるソフトウェア開発プロジェクト（Web、モバイル、データ分析、インフラ等）
- 利用者：ソフトウェア開発者、プロジェクトマネージャー

### 1.3 参照文書
- [OCD (運用コンセプト記述書)](./OCD_multi_claude_code_system.md)
- [SSS (システム/サブシステム仕様書)](./SSS_multi_claude_code_system.md)
- [汎用フレームワーク化要求仕様](./framework_requirements.md)

## 2. 機能要件

### 2.1 エージェント管理機能

#### 2.1.1 エージェント起動・停止機能
**要件ID**: FR-001  
**機能**: 複数のClaude Codeインスタンスを同時に起動・停止する  
**詳細**:
- 最低10個のエージェントを同時起動可能
- tmuxセッションによる統合管理
- 個別エージェントの起動・停止
- 一括起動・停止機能

**入力**: start-agents.sh / stop-agents.sh実行  
**出力**: 各エージェントのClaude Codeインスタンス起動/tmuxセッション終了  
**事前条件**: tmuxインストール済み、Claude Code CLI利用可能  
**事後条件**: 指定されたエージェントが動作状態/停止状態

#### 2.1.2 ペルソナ設定機能
**要件ID**: FR-002  
**機能**: 各エージェントに固有の役割とペルソナを設定する  
**詳細**:
- CLAUDE.mdファイルによるペルソナ定義
- 役割別ディレクトリ構造（boss/, pm/, engineer/等）
- ペルソナファイルの動的読み込み

**入力**: agents/[role]/CLAUDE.mdファイル  
**出力**: エージェントのペルソナ設定  
**事前条件**: ペルソナファイルが存在  
**事後条件**: エージェントが指定されたペルソナで動作

#### 2.1.3 エージェント状態監視機能
**要件ID**: FR-003  
**機能**: 各エージェントの稼働状態を監視する  
**詳細**:
- 稼働中/待機中/エラー状態の検出
- tmuxペイン状態の確認
- 応答性チェック

**入力**: tmux pane状態、エージェント応答  
**出力**: エージェント状態情報  
**事前条件**: エージェントが起動済み  
**事後条件**: 現在の状態が把握可能

### 2.2 タスク管理機能

#### 2.2.1 タスク分解機能
**要件ID**: FR-010  
**機能**: 要求をエージェントが実行可能なタスクに分解する  
**詳細**:
- PMから各専門エージェントへのタスク分解依頼
- ストーリーポイントによる工数見積もり
- 13ポイント以上のタスクの自動再分割

**入力**: 開発要求、技術仕様  
**出力**: 実行可能なタスクリスト、工数見積もり  
**事前条件**: 要求が明確化済み  
**事後条件**: 各エージェントが実行可能なタスクが定義済み

#### 2.2.2 タスク割り当て機能
**要件ID**: FR-011  
**機能**: 分解されたタスクを適切なエージェントに割り当てる  
**詳細**:
- エージェントのスキルセットとタスクのマッチング
- 優先順位に基づく割り当て
- 依存関係の考慮

**入力**: タスクリスト、エージェント情報  
**出力**: タスク割り当て表  
**事前条件**: タスクが分解済み、エージェントが利用可能  
**事後条件**: 全タスクが適切なエージェントに割り当て済み

#### 2.2.3 進捗追跡機能
**要件ID**: FR-012  
**機能**: 各タスクの進捗状況を追跡・管理する  
**詳細**:
- タスク状態（未着手/進行中/レビュー中/完了）の管理
- 進捗の可視化
- ボトルネックの検出

**入力**: エージェントからの進捗報告  
**出力**: 進捗状況レポート  
**事前条件**: タスクが割り当て済み  
**事後条件**: 現在の進捗状況が把握可能

### 2.3 通信・協調機能

#### 2.3.1 エージェント間通信機能
**要件ID**: FR-020  
**機能**: エージェント間でメッセージを送受信する  
**詳細**:
- tmux send-keysによる直接通信
- 共有ディレクトリによる非同期メッセージング
- メッセージの配信確認

**入力**: 送信者、受信者、メッセージ内容  
**出力**: メッセージ配信、配信確認  
**事前条件**: 送受信エージェントが稼働中  
**事後条件**: メッセージが正常に配信完了

#### 2.3.2 人間とのインターフェース機能
**要件ID**: FR-021  
**機能**: 人間とエージェント間の対話インターフェースを提供する  
**詳細**:
- Boss/POエージェントが人間との窓口
- 要求の受付と分析
- 結果の報告と確認

**入力**: 人間からの要求・指示  
**出力**: 分析結果、実行結果報告  
**事前条件**: Boss/POエージェントが稼働中  
**事後条件**: 人間の要求が適切に処理される

### 2.4 開発支援機能

#### 2.4.1 Git統合機能
**要件ID**: FR-030  
**機能**: Git worktreeを使用した並列開発環境を提供する  
**詳細**:
- 各エージェントのタスク毎で独立ブランチを作成
- 並列での作業実施
- コンフリクトの回避

**入力**: ブランチ名、担当エージェント  
**出力**: 独立した作業環境  
**事前条件**: Gitリポジトリが存在  
**事後条件**: エージェントが独立して作業可能

#### 2.4.2 GitHub連携機能
**要件ID**: FR-031  
**機能**: GitHub MCPを使用したPR作成・レビュー機能を提供する  
**詳細**:
- Pull Requestの自動作成
- エージェント間でのコードレビュー
- マージの管理

**入力**: 完成したコード、レビュー要求  
**出力**: Pull Request、レビューコメント  
**事前条件**: GitHub MCP設定済み  
**事後条件**: コードが適切にレビュー・マージされる

#### 2.4.3 テスト自動実行機能
**要件ID**: FR-032  
**機能**: 実装されたコードのテストを自動実行する  
**詳細**:
- 単体テスト、統合テストの実行
- テスト結果の収集・報告
- カバレッジの測定

**入力**: テストコード、実装コード  
**出力**: テスト結果、カバレッジレポート  
**事前条件**: テストコードが存在  
**事後条件**: コードの品質が検証される

### 2.5 エラー処理・復旧機能

#### 2.5.1 エラー検出機能
**要件ID**: FR-040  
**機能**: システム内で発生したエラーを検出・記録する  
**詳細**:
- エージェントエラーの検出
- システムエラーの監視
- エラー情報の記録

**入力**: エージェント状態、システム状態  
**出力**: エラー情報、ログ  
**事前条件**: システムが稼働中  
**事後条件**: エラーが適切に記録される

#### 2.5.2 自動復旧機能
**要件ID**: FR-041  
**機能**: エラー発生時に自動的に復旧処理を実行する  
**詳細**:
- エージェントの自動再起動
- タスク状態の復元
- 作業の継続

**入力**: エラー情報、バックアップデータ  
**出力**: 復旧されたシステム状態  
**事前条件**: エラーが検出済み  
**事後条件**: システムが正常状態に復旧

## 3. 非機能要件

### 3.1 性能要件

#### 3.1.1 応答時間
- **PF-001**: タスク割り当て処理：5秒以内
- **PF-002**: エージェント間通信：1秒以内
- **PF-003**: エージェント起動時間：30秒以内
- **PF-004**: 状態監視の更新間隔：10秒以内

#### 3.1.2 スループット
- **PF-010**: 同時実行可能エージェント数：最低10、システムリソース上限まで拡張可能
- **PF-011**: 並列処理による生産性：単独実行比6倍以上
- **PF-012**: 1日あたりの処理可能タスク数：100タスク以上

### 3.2 信頼性要件

#### 3.2.1 可用性
- **RL-001**: システム稼働率：99%以上
- **RL-002**: エージェント個別稼働率：95%以上
- **RL-003**: 障害からの復旧時間：5分以内

#### 3.2.2 耐障害性
- **RL-010**: 単一エージェント障害時のシステム継続動作
- **RL-011**: データ消失防止（タスク状態の永続化）
- **RL-012**: 部分的システム停止時の自動復旧

### 3.3 使いやすさ要件

#### 3.3.1 操作性
- **US-001**: 簡単なコマンドでの起動・停止（bash start-agents.sh）
- **US-002**: 設定変更の容易性（YAML設定ファイル）
- **US-003**: 進捗状況の可視性（tmux画面分割）

#### 3.3.2 学習容易性
- **US-010**: 基本操作の習得時間：30分以内
- **US-011**: 新規エージェントタイプ追加：1時間以内
- **US-012**: トラブルシューティング情報の充実

### 3.4 保守性要件

#### 3.4.1 変更容易性
- **MT-001**: エージェント構成変更：設定ファイル編集のみ
- **MT-002**: ペルソナ変更：CLAUDE.mdファイル編集のみ
- **MT-003**: 新機能追加時の既存機能への影響最小化

#### 3.4.2 診断可能性
- **MT-010**: 詳細ログの出力
- **MT-011**: エラー原因の特定可能性
- **MT-012**: 性能メトリクスの測定・出力

### 3.5 移植性要件

#### 3.5.1 環境依存性
- **PT-001**: OS対応：macOS、Linux
- **PT-002**: 必要ソフトウェア：Claude Code CLI、tmux、Git
- **PT-003**: 最小システム要件：16GB RAM、マルチコアCPU

#### 3.5.2 再利用性
- **PT-010**: 異なるプロジェクトでの利用可能性
- **PT-011**: プログラミング言語非依存
- **PT-012**: フレームワーク・ライブラリ非依存

### 3.6 セキュリティ要件

#### 3.6.1 認証・認可
- **SC-001**: Claude Code CLI認証の利用
- **SC-002**: GitHub MCP認証の利用
- **SC-003**: 機密情報の適切な管理

#### 3.6.2 データ保護
- **SC-010**: 作業データの暗号化
- **SC-011**: ログの安全な管理
- **SC-012**: 外部通信の暗号化

## 4. 制約事項

### 4.1 技術制約
- tmuxベースの実装に限定
- Claude Code CLIの機能制限に準拠
- ローカル環境での実行に限定

### 4.2 運用制約
- 最終的なマージ判断は人間が実施
- セキュリティ上重要な操作は人間の確認が必要
- リソース使用量の監視が必要

### 4.3 外部依存
- Claude Code CLI の稼働状況
- GitHub API のサービス状況
- tmux の安定動作

## 5. 検証基準

### 5.1 機能検証
- 各機能要件に対するテストケースの実行
- エンドツーエンドシナリオの検証
- 異常系処理の確認

### 5.2 性能検証
- 負荷テストによる性能要件の確認
- 並列処理効率の測定
- リソース使用量の監視

### 5.3 統合検証
- システム全体での動作確認
- 外部システムとの連携テスト
- 長時間運用での安定性確認

---

**承認**  
本SRSは、AI Multi-Agent Claude Code Development System の機能要件および非機能要件を定義したものである。

作成日: 2025-01-07  
バージョン: 1.0.0