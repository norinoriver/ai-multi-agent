# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ™ãƒ¼ã‚¹é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ  v2

## æ¦‚è¦

ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®å•é¡Œã‚’è§£æ±ºã—ãŸã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ™ãƒ¼ã‚¹ã®é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚å„é€šçŸ¥ã‚’å€‹åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä½œæˆã—ã€`ls -ltr`ã§æ›´æ–°é †ã«å‡¦ç†ã—ã¾ã™ã€‚

## æ”¹è‰¯ç‚¹

- **IOãƒ–ãƒ­ãƒƒã‚¯ãªã—**: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ­ãƒƒã‚¯ä¸è¦
- **ç«¶åˆå›é¿ä¸è¦**: å„é€šçŸ¥ãŒç‹¬ç«‹ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«
- **å‡¦ç†é †åºä¿è¨¼**: `ls -ltr`ã§ç¢ºå®Ÿã«æ›´æ–°é †ã«å‡¦ç†
- **ã‚¢ãƒˆãƒŸãƒƒã‚¯æ“ä½œ**: ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆã¯æœ¬è³ªçš„ã«ã‚¢ãƒˆãƒŸãƒƒã‚¯

## ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```mermaid
graph TB
    subgraph "é€šçŸ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª"
        A[notifications/pending/]
        B[notifications/processed/]
        
        subgraph "æœªå‡¦ç†é€šçŸ¥"
            C[20250703_100000_123456_engineer-1.txt]
            D[20250703_100005_789012_designer-1.txt]
            E[20250703_100010_345678_marketer-1.txt]
        end
        
        subgraph "å‡¦ç†æ¸ˆã¿é€šçŸ¥"
            F[20250703_095500_111111_engineer-2.txt]
            G[20250703_095800_222222_designer-2.txt]
        end
    end
    
    subgraph "å‡¦ç†ãƒ•ãƒ­ãƒ¼"
        H[ls -ltr pending/]
        I[é †æ¬¡å‡¦ç†]
        J[mv to processed/]
        K[Bossé€šçŸ¥]
    end
    
    A --> C
    A --> D
    A --> E
    B --> F
    B --> G
    
    H --> I
    I --> J
    J --> K
    C --> H
    D --> H
    E --> H
```

## ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡

```
YYYYMMDD_HHMMSS_NANOSEC_AGENT-NAME.txt
```

ä¾‹:
- `20250703_143022_123456789_engineer-1.txt`
- `20250703_143025_987654321_designer-1.txt`

## ä½¿ç”¨æ–¹æ³•

### 1. ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
./scripts/setup-notification-system-v2.sh
```

### 2. é€šçŸ¥é€ä¿¡

```bash
# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‹ã‚‰ã®é€šçŸ¥
./scripts/send-notification-v2.sh engineer-1 "ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½å®Œäº†"
./scripts/send-notification-v2.sh designer-1 "UIè¨­è¨ˆå®Œäº†"
./scripts/send-notification-v2.sh marketer-1 "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆå®Œäº†"
```

### 3. é€šçŸ¥ç¢ºèª

```bash
# æœªå‡¦ç†é€šçŸ¥ã®ç¢ºèª
ls -ltr notifications/pending/

# å‡¦ç†æ¸ˆã¿é€šçŸ¥ã®ç¢ºèª
ls -ltr notifications/processed/

# é€šçŸ¥ç›£è¦–ã®ç¢ºèª
tmux attach -t ai-multi-agent:notification
```

## å‡¦ç†ãƒ•ãƒ­ãƒ¼

### 1. é€šçŸ¥ä½œæˆ

```bash
# send-notification-v2.sh ã®å‹•ä½œ
TIMESTAMP=$(date +%Y%m%d_%H%M%S_%N)
NOTIFICATION_FILE="pending/${TIMESTAMP}_${FROM_AGENT}.txt"
echo "[$FROM_AGENT] $MESSAGE (å®Œäº†æ™‚åˆ»: $NOTIFICATION_TIME)" > "$NOTIFICATION_FILE"
```

### 2. é€šçŸ¥ç›£è¦–

```bash
# notification-watcher-v2.sh ã®å‹•ä½œ
files=($(ls -ltr pending/ 2>/dev/null | awk 'NR>1 {print $NF}'))
for file in "${files[@]}"; do
    message=$(cat "pending/$file")
    send_notification_to_boss "$message"
    mv "pending/$file" "processed/"
done
```

## å„ªä½æ€§

### vs ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹

| é …ç›® | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ™ãƒ¼ã‚¹ |
|------|---------------|-------------------|
| ç«¶åˆå›é¿ | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ­ãƒƒã‚¯å¿…è¦ | ä¸è¦ |
| IOãƒ–ãƒ­ãƒƒã‚¯ | è€ƒæ…®å¿…è¦ | ä¸è¦ |
| å‡¦ç†é †åº | è¤‡é›‘ | ls -ltr ã§ç°¡å˜ |
| å®Ÿè£…è¤‡é›‘åº¦ | é«˜ | ä½ |

### vs ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

| é …ç›® | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ™ãƒ¼ã‚¹ |
|------|--------------|-------------------|
| ä¾å­˜é–¢ä¿‚ | DBå¿…è¦ | ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ã¿ |
| è¨­å®š | è¤‡é›‘ | ç°¡å˜ |
| å¯è¦–æ€§ | ã‚¯ã‚¨ãƒªå¿…è¦ | ls ã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèª |
| ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— | å°‚ç”¨ãƒ„ãƒ¼ãƒ« | é€šå¸¸ã®ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ |

## å®Ÿè£…ä¾‹

### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä½œæ¥­å®Œäº†ãƒ‘ã‚¿ãƒ¼ãƒ³

```bash
#!/bin/bash
# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä½œæ¥­ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¾‹

# 1. ä½œæ¥­å®Ÿè¡Œ
echo "ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã‚’å®Ÿè£…ä¸­..."
sleep 30  # å®Ÿéš›ã®ä½œæ¥­æ™‚é–“

# 2. ä½œæ¥­å®Œäº†é€šçŸ¥
./scripts/send-notification-v2.sh engineer-1 "ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã®å®Ÿè£…ãŒå®Œäº†ã—ã¾ã—ãŸ"

# 3. æ¬¡ã®ã‚¿ã‚¹ã‚¯ãŒã‚ã‚Œã°ç¶™ç¶š
echo "æ¬¡ã®ã‚¿ã‚¹ã‚¯ã‚’å¾…æ©Ÿä¸­..."
```

### Bosså´ã®å‡¦ç†

```bash
# Bosså´ã§ã¯è‡ªå‹•çš„ã«é€šçŸ¥ã‚’å—ä¿¡
# ã€ğŸ””é€šçŸ¥ 2025-07-03 14:30:25ã€‘[engineer-1] ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã®å®Ÿè£…ãŒå®Œäº†ã—ã¾ã—ãŸ (å®Œäº†æ™‚åˆ»: 2025-07-03T14:30:22+09:00)

# æ¬¡ã®æŒ‡ç¤ºã‚’å‡ºã™
./scripts/send-to-pane.sh engineer 1 "æ¬¡ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„"
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### é€šçŸ¥ãŒæ¥ãªã„å ´åˆ

```bash
# 1. æœªå‡¦ç†é€šçŸ¥ã®ç¢ºèª
ls -la notifications/pending/

# 2. ç›£è¦–ãƒ—ãƒ­ã‚»ã‚¹ã®ç¢ºèª
tmux attach -t ai-multi-agent:notification

# 3. æ‰‹å‹•ãƒ†ã‚¹ãƒˆ
./scripts/send-notification-v2.sh test "ãƒ†ã‚¹ãƒˆé€šçŸ¥"
```

### é€šçŸ¥ãŒæºœã¾ã‚Šã™ããŸå ´åˆ

```bash
# å¤ã„å‡¦ç†æ¸ˆã¿é€šçŸ¥ã®å‰Šé™¤
find notifications/processed/ -type f -mtime +7 -delete

# å¼·åˆ¶çš„ã«å…¨ã¦å‡¦ç†æ¸ˆã¿ã«ã™ã‚‹
mv notifications/pending/* notifications/processed/ 2>/dev/null || true
```

## æ‹¡å¼µã‚¢ã‚¤ãƒ‡ã‚¢

### 1. å„ªå…ˆåº¦å¯¾å¿œ

```bash
# å„ªå…ˆåº¦åˆ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
mkdir -p notifications/pending/{high,medium,low}

# å„ªå…ˆåº¦ä»˜ãé€ä¿¡
./scripts/send-notification-v2.sh engineer-1 "ç·Šæ€¥ãƒã‚°ä¿®æ­£å®Œäº†" high
```

### 2. é€šçŸ¥ç¨®åˆ¥å¯¾å¿œ

```bash
# ç¨®åˆ¥åˆ¥å‡¦ç†
./scripts/send-notification-v2.sh engineer-1 "complete:ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½å®Œäº†"
./scripts/send-notification-v2.sh engineer-1 "error:ãƒ†ã‚¹ãƒˆå¤±æ•—"
./scripts/send-notification-v2.sh engineer-1 "question:ä»•æ§˜ç¢ºèªã—ãŸã„"
```

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ™ãƒ¼ã‚¹æ–¹å¼ã«ã‚ˆã‚Šã€ã‚·ãƒ³ãƒ—ãƒ«ã§ç¢ºå®Ÿãªé€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ãŒå®Ÿç¾ã§ãã¾ã—ãŸï¼